(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,a)=>{s.exports=e.r(76562)},71689,e=>{"use strict";let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],71689)},7233,e=>{"use strict";let s=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},27612,e=>{"use strict";let s=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],27612)},2999,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(18566),l=e.i(22016),r=e.i(71689),i=e.i(7233),n=e.i(75254);let d=(0,n.default)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),c=(0,n.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),m=(0,n.default)("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var x=e.i(27612);let h=(0,n.default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),o=e=>{let s=0,a=[];if(e.hasHosting&&(s+=25,a.push("HÃ©bergement: 25â‚¬")),e.hasOrderSystem){let t=e.commissionRate||6,l=e.minCommission||60,r=Math.round(e.monthlyRevenue*(t/100));r>=l?(s+=r,a.push(`Commande (${t}%): ${r}â‚¬`)):(s+=l,a.push(`Commande (min): ${l}â‚¬`))}return{total:s,details:a}};function p(){let e=(0,t.useRouter)(),[n,p]=(0,a.useState)(!0),[u,g]=(0,a.useState)([]),[y,j]=(0,a.useState)(!1),[N,b]=(0,a.useState)({name:"",email:"",hasHosting:!0,hasOrderSystem:!1,monthlyRevenue:0,commissionRate:6,minCommission:60});(0,a.useEffect)(()=>{if(!localStorage.getItem("rivego_user"))return void e.push("/admin/login");let s=localStorage.getItem("rivego_billing_clients");s&&g(JSON.parse(s)),p(!1)},[e]);let v=e=>{g(e),localStorage.setItem("rivego_billing_clients",JSON.stringify(e))},f=u.reduce((e,s)=>e+o(s).total,0);return n?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-pulse text-gray-500",children:"Chargement..."})}):(0,s.jsx)("section",{className:"min-h-screen pt-24 pb-12 bg-gray-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,s.jsx)(l.default,{href:"/admin/dashboard",className:"p-2 rounded-xl bg-white shadow-sm hover:shadow-md transition-shadow",children:(0,s.jsx)(r.ArrowLeft,{size:24,className:"text-gray-600"})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-lg bg-[#0D7377]",children:(0,s.jsx)(c,{size:24,className:"text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Facturation mensuelle"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Gestion des prÃ©lÃ¨vements clients"})]})]})}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"btn btn-primary",children:[(0,s.jsx)(i.Plus,{size:20}),"Nouveau client"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-blue-100",children:(0,s.jsx)(h,{size:24,className:"text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Clients actifs"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:u.length})]})]})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-green-100",children:(0,s.jsx)(d,{size:24,className:"text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Total mensuel"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-[#0D7377]",children:[f," â‚¬"]})]})]})}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"p-3 rounded-xl bg-purple-100",children:(0,s.jsx)(m,{size:24,className:"text-purple-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Prochain prÃ©lÃ¨vement"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"1er du mois"})]})]})})]}),y&&(0,s.jsxs)("div",{className:"card mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-6 text-gray-900",children:"Ajouter un client"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Nom du restaurant *"}),(0,s.jsx)("input",{type:"text",value:N.name,onChange:e=>b({...N,name:e.target.value}),className:"input",placeholder:"Ex: Chez Zhang"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"label",children:"Email *"}),(0,s.jsx)("input",{type:"email",value:N.email,onChange:e=>b({...N,email:e.target.value}),className:"input",placeholder:"contact@restaurant.lu"})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{className:"label mb-3",children:"Services"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("label",{className:`p-4 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${N.hasHosting?"border-[#0D7377] bg-[#0D7377]/5":"border-gray-200"}`,children:[(0,s.jsx)("input",{type:"checkbox",checked:N.hasHosting,onChange:e=>b({...N,hasHosting:e.target.checked}),className:"w-5 h-5 rounded text-[#0D7377]"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"HÃ©bergement"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"25â‚¬/mois"})]})]}),(0,s.jsxs)("label",{className:`p-4 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-3 ${N.hasOrderSystem?"border-[#0D7377] bg-[#0D7377]/5":"border-gray-200"}`,children:[(0,s.jsx)("input",{type:"checkbox",checked:N.hasOrderSystem,onChange:e=>b({...N,hasOrderSystem:e.target.checked}),className:"w-5 h-5 rounded text-[#0D7377]"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"SystÃ¨me commande"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Commission variable"})]})]})]})]}),N.hasOrderSystem&&(0,s.jsxs)("div",{className:"mt-6 p-4 bg-orange-50 rounded-xl",children:[(0,s.jsx)("label",{className:"label mb-3 text-orange-800",children:"ParamÃ¨tres commission"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-600 mb-1 block",children:"Taux (%)"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",value:N.commissionRate,onChange:e=>b({...N,commissionRate:parseFloat(e.target.value)||6}),className:"input w-20 text-center",min:"1",max:"20",step:"0.5"}),(0,s.jsx)("span",{className:"text-gray-500",children:"%"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-gray-600 mb-1 block",children:"Minimum mensuel"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",value:N.minCommission,onChange:e=>b({...N,minCommission:parseFloat(e.target.value)||60}),className:"input w-20 text-center",min:"0"}),(0,s.jsx)("span",{className:"text-gray-500",children:"â‚¬"})]})]})]}),(0,s.jsxs)("p",{className:"text-xs text-orange-600 mt-2",children:["Le client paiera ",N.commissionRate,"% du CA ou minimum ",N.minCommission,"â‚¬"]})]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,s.jsx)("button",{onClick:()=>{N.name&&N.email&&(v([...u,{id:Date.now().toString(),...N}]),b({name:"",email:"",hasHosting:!0,hasOrderSystem:!1,monthlyRevenue:0,commissionRate:6,minCommission:60}),j(!1))},className:"btn btn-primary",children:"Ajouter le client"}),(0,s.jsx)("button",{onClick:()=>j(!1),className:"btn bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Annuler"})]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-6 text-gray-900",children:"Clients"}),0===u.length?(0,s.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,s.jsx)(h,{size:48,className:"mx-auto mb-4 opacity-30"}),(0,s.jsx)("p",{children:"Aucun client pour le moment"}),(0,s.jsxs)("button",{onClick:()=>j(!0),className:"btn btn-primary mt-4",children:[(0,s.jsx)(i.Plus,{size:20}),"Ajouter un client"]})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left py-4 px-2 font-medium text-gray-600",children:"Restaurant"}),(0,s.jsx)("th",{className:"text-left py-4 px-2 font-medium text-gray-600",children:"Services"}),(0,s.jsx)("th",{className:"text-left py-4 px-2 font-medium text-gray-600",children:"CA mensuel"}),(0,s.jsx)("th",{className:"text-left py-4 px-2 font-medium text-gray-600",children:"DÃ©tail"}),(0,s.jsx)("th",{className:"text-right py-4 px-2 font-medium text-gray-600",children:"Total"}),(0,s.jsx)("th",{className:"py-4 px-2"})]})}),(0,s.jsx)("tbody",{children:u.map(e=>{let a=o(e);return(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"py-4 px-2",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,s.jsx)("td",{className:"py-4 px-2",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.hasHosting&&(0,s.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"HÃ©bergement"}),e.hasOrderSystem&&(0,s.jsx)("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Commande"})]})}),(0,s.jsx)("td",{className:"py-4 px-2",children:e.hasOrderSystem?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",value:e.monthlyRevenue,onChange:s=>{var a,t;return a=e.id,t=parseFloat(s.target.value)||0,void v(u.map(e=>e.id===a?{...e,monthlyRevenue:t}:e))},className:"input w-24 text-right py-1",placeholder:"0"}),(0,s.jsx)("span",{className:"text-gray-500",children:"â‚¬"})]}):(0,s.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,s.jsx)("td",{className:"py-4 px-2",children:(0,s.jsx)("div",{className:"text-sm text-gray-600",children:a.details.map((e,a)=>(0,s.jsx)("div",{children:e},a))})}),(0,s.jsx)("td",{className:"py-4 px-2 text-right",children:(0,s.jsxs)("span",{className:"text-xl font-bold text-[#0D7377]",children:[a.total," â‚¬"]})}),(0,s.jsx)("td",{className:"py-4 px-2",children:(0,s.jsx)("button",{onClick:()=>{var s;return s=e.id,void(confirm("Supprimer ce client ?")&&v(u.filter(e=>e.id!==s)))},className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,s.jsx)(x.Trash2,{size:18})})})]},e.id)})}),(0,s.jsx)("tfoot",{children:(0,s.jsxs)("tr",{className:"bg-gray-50",children:[(0,s.jsx)("td",{colSpan:4,className:"py-4 px-2 font-semibold text-gray-900",children:"Total Ã  prÃ©lever"}),(0,s.jsx)("td",{className:"py-4 px-2 text-right",children:(0,s.jsxs)("span",{className:"text-2xl font-bold text-[#0D7377]",children:[f," â‚¬"]})}),(0,s.jsx)("td",{})]})})]})}),u.length>0&&(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-between items-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"ðŸ’¡ IntÃ©gration GoCardless Ã  venir pour les prÃ©lÃ¨vements automatiques"}),(0,s.jsxs)("button",{className:"btn btn-primary opacity-50 cursor-not-allowed",disabled:!0,children:[(0,s.jsx)(c,{size:20}),"Lancer les prÃ©lÃ¨vements"]})]})]})]})})}e.s(["default",()=>p],2999)}]);