(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],40160)},18566,(e,t,s)=>{t.exports=e.r(76562)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],3116)},81721,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),n=e.i(69638),i=e.i(40160),l=e.i(78583),c=e.i(3116),r=e.i(27612),o=e.i(75254);let d=(0,o.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),m=(0,o.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function u({onSignatureChange:e,width:a=500,height:n=200,label:i="Signature"}){let l=(0,s.useRef)(null),[c,o]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=l.current;if(!e)return;let t=e.getContext("2d");t&&(t.strokeStyle="#1A3A5C",t.lineWidth=2,t.lineCap="round",t.lineJoin="round",t.fillStyle="#FFFFFF",t.fillRect(0,0,e.width,e.height))},[]);let x=e=>{let t=l.current;if(!t)return{x:0,y:0};let s=t.getBoundingClientRect(),a=t.width/s.width,n=t.height/s.height;if("touches"in e){let t=e.touches[0];return{x:(t.clientX-s.left)*a,y:(t.clientY-s.top)*n}}return{x:(e.clientX-s.left)*a,y:(e.clientY-s.top)*n}},p=e=>{e.preventDefault();let t=l.current,s=t?.getContext("2d");if(!s)return;let{x:a,y:n}=x(e);s.beginPath(),s.moveTo(a,n),o(!0)},g=e=>{if(!c)return;e.preventDefault();let t=l.current,s=t?.getContext("2d");if(!s)return;let{x:a,y:n}=x(e);s.lineTo(a,n),s.stroke(),h(!0)},y=()=>{if(c&&u){let t=l.current;t&&e(t.toDataURL("image/png"))}o(!1)},f=()=>{let t=l.current,s=t?.getContext("2d");s&&t&&(s.fillStyle="#FFFFFF",s.fillRect(0,0,t.width,t.height),h(!1),e(null))};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("label",{className:"label",children:i}),(0,t.jsxs)("div",{className:"relative border-2 border-dashed border-gray-300 rounded-xl overflow-hidden bg-white",children:[(0,t.jsx)("canvas",{ref:l,width:a,height:n,className:"w-full touch-none cursor-crosshair",style:{maxWidth:"100%",height:"auto",aspectRatio:`${a}/${n}`},onMouseDown:p,onMouseMove:g,onMouseUp:y,onMouseLeave:y,onTouchStart:p,onTouchMove:g,onTouchEnd:y}),!u&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Signez ici (souris ou tactile)"})})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{type:"button",onClick:f,className:"btn bg-gray-100 hover:bg-gray-200 text-gray-700 flex-1",disabled:!u,children:[(0,t.jsx)(r.Trash2,{size:18}),"Effacer"]}),(0,t.jsx)("button",{type:"button",onClick:f,className:"btn bg-gray-100 hover:bg-gray-200 text-gray-700",disabled:!u,children:(0,t.jsx)(m,{size:18})}),u&&(0,t.jsxs)("button",{type:"button",onClick:()=>{if(u){let t=l.current;t&&e(t.toDataURL("image/png"))}},className:"btn btn-primary flex-1",children:[(0,t.jsx)(d,{size:18}),"Confirmer"]})]}),u&&(0,t.jsxs)("p",{className:"text-sm text-green-600 flex items-center gap-2",children:[(0,t.jsx)(d,{size:16}),"Signature enregistrée"]})]})}let h={id:"DEV-202412-001",createdAt:"18/12/2024",validUntil:"18/01/2025",status:"pending",company:{name:"RIVEGO Trade and Marketing Group S.à r.l.-S",address:"7, rue Jean-Pierre Sauvage, L-2514 Kirchberg",email:"formulaire@webvision.lu"},client:{name:"Jean Dupont",company:"Restaurant Le Gourmet",address:"123 Rue de la Gare, L-1234 Luxembourg",email:"contact@legourmet.lu",phone:"+352 123 456 789"},service:{name:"WebVision",plan:"Business",description:"Site complet avec fonctionnalités avancées"},items:[{description:"Site Business",quantity:1,price:599,total:599},{description:"Hébergement & Maintenance (mensuel)",quantity:1,price:25,total:25}],subtotal:624,discountPercent:0,discountAmount:0,total:624};function x(){let r=(0,a.useParams)().id,[o]=(0,s.useState)(h),[d,m]=(0,s.useState)(null),[x,p]=(0,s.useState)(!1),[g,y]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1),b=async()=>{d&&x&&(y(!0),await new Promise(e=>setTimeout(e,1500)),console.log("Quote signed:",{quoteId:r,signature:d,signedAt:new Date().toISOString()}),v(!0),y(!1))},j=async()=>{let{generateQuotePDF:t}=await e.A(76500),s={quoteNumber:o.id,quoteDate:o.createdAt,validUntil:o.validUntil,companyName:o.company.name,companyAddress:o.company.address,companyVat:"LU35916651",companyEmail:o.company.email,clientName:o.client.name,clientCompany:o.client.company,clientAddress:o.client.address,clientEmail:o.client.email,clientPhone:o.client.phone,serviceName:o.service.name,planName:o.service.plan,planDescription:o.service.description,lineItems:o.items.map(e=>({description:e.description,quantity:e.quantity,unitPrice:e.price,total:e.total})),subtotal:o.subtotal,discountPercent:o.discountPercent,discountAmount:o.discountAmount,total:o.total,vatRate:17,vatAmount:.17*o.total,totalTtc:1.17*o.total,depositAmount:1.17*o.total*.2,showDeposit:!0,paymentTerms:"Acompte de 20% à la signature. Solde à la livraison.",notes:"Devis signé électroniquement",signatureImage:d||void 0,signedDate:new Date().toLocaleDateString("fr-FR")},a=await t(s),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`devis-${o.id}-signe.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)},N=async()=>{let{generateContractPDF:t}=await e.A(95181),s={contractNumber:o.id,contractDate:new Date().toLocaleDateString("fr-FR"),companyName:o.company.name,companyAddress:o.company.address,companyVat:"LU35916651",clientName:o.client.name,clientCompany:o.client.company,clientAddress:o.client.address,clientVat:"",serviceName:o.service.name,planName:o.service.plan,totalAmountTtc:1.17*o.total,monthlyAmount:25,durationMonths:12,signatureImage:d||void 0,signedDate:new Date().toLocaleDateString("fr-FR")},a=await t(s),n=URL.createObjectURL(a),i=document.createElement("a");i.href=n,i.download=`contrat-${o.id}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)};return f?(0,t.jsx)("section",{className:"min-h-screen flex items-center justify-center py-32 bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-6 text-center max-w-lg",children:[(0,t.jsx)("div",{className:"inline-flex p-6 rounded-full bg-green-100 mb-8",children:(0,t.jsx)(n.CheckCircle,{size:64,className:"text-green-600"})}),(0,t.jsx)("h1",{className:"text-4xl font-bold mb-4 text-gray-900",children:"Devis signé !"}),(0,t.jsxs)("p",{className:"text-gray-600 text-lg mb-8",children:["Merci ! Votre devis N° ",o.id," a été signé avec succès. Vous recevrez une confirmation par email."]}),(0,t.jsxs)("div",{className:"card text-left",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Prochaines étapes"}),(0,t.jsxs)("ol",{className:"space-y-3 text-gray-600 text-sm",children:[(0,t.jsxs)("li",{className:"flex gap-3",children:[(0,t.jsx)("span",{className:"w-6 h-6 rounded-full bg-[#1A3A5C] text-white flex items-center justify-center text-xs shrink-0",children:"1"}),"Vous recevrez une copie du devis signé et du contrat par email"]}),(0,t.jsxs)("li",{className:"flex gap-3",children:[(0,t.jsx)("span",{className:"w-6 h-6 rounded-full bg-[#1A3A5C] text-white flex items-center justify-center text-xs shrink-0",children:"2"}),"Notre équipe vous contactera sous 24h"]}),(0,t.jsxs)("li",{className:"flex gap-3",children:[(0,t.jsx)("span",{className:"w-6 h-6 rounded-full bg-[#1A3A5C] text-white flex items-center justify-center text-xs shrink-0",children:"3"}),"Le projet démarrera après réception de l'acompte"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-8",children:[(0,t.jsxs)("button",{onClick:j,className:"btn btn-secondary",children:[(0,t.jsx)(i.Download,{size:20}),"Décharger le devis signé"]}),(0,t.jsxs)("button",{onClick:N,className:"btn btn-primary",children:[(0,t.jsx)(l.FileText,{size:20}),"Télécharger mon contrat"]})]})]})}):(0,t.jsx)("section",{className:"min-h-screen pt-32 pb-12 bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-6 max-w-4xl",children:[(0,t.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Signer votre devis"}),(0,t.jsxs)("p",{className:"text-gray-500",children:["Devis N° ",o.id]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-amber-100 text-amber-700 rounded-lg text-sm font-medium",children:[(0,t.jsx)(c.Clock,{size:16}),"Expire le ",o.validUntil]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Récapitulatif"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Client"}),(0,t.jsx)("span",{className:"font-medium text-right",children:o.client.company})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Service"}),(0,t.jsxs)("span",{className:"font-medium",children:[o.service.name," - ",o.service.plan]})]}),(0,t.jsxs)("div",{className:"pt-4 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex justify-between text-2xl font-bold text-[#0D7377]",children:[(0,t.jsx)("span",{children:"Total TTC"}),(0,t.jsxs)("span",{children:[(1.17*o.total).toFixed(2)," €"]})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Dont TVA (17%) : ",(.17*o.total).toFixed(2)," €"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Signature"}),(0,t.jsx)(u,{onSignatureChange:e=>m(e)})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("label",{className:"flex gap-3 cursor-pointer group",children:[(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded border-gray-300 text-[#1A3A5C] focus:ring-[#1A3A5C]",checked:x,onChange:e=>p(e.target.checked)})}),(0,t.jsx)("span",{className:"text-sm text-gray-600 group-hover:text-gray-900 transition-colors",children:"J'ai lu et j'accepte les conditions générales de vente et de prestation de services. Je reconnais que cette signature électronique a la même valeur légale qu'une signature manuscrite."})]}),(0,t.jsx)("button",{onClick:b,disabled:!d||!x||g,className:"btn btn-primary w-full py-4 text-lg shadow-xl shadow-[#1A3A5C]/20",children:g?(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white/20 border-t-white rounded-full animate-spin"}),"Signature en cours..."]}):"Signer et valider le devis"})]})]})]})]})})}e.s(["default",()=>x],81721)},76500,e=>{e.v(t=>Promise.all(["static/chunks/e210b1c6426644f0.js","static/chunks/c0d8e98e23578867.js"].map(t=>e.l(t))).then(()=>t(67042)))},95181,e=>{e.v(t=>Promise.all(["static/chunks/c0e633280a329126.js","static/chunks/c0d8e98e23578867.js"].map(t=>e.l(t))).then(()=>t(23449)))}]);